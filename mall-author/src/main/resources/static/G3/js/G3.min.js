var G3 = G = {};

* **/
/**
 * G3 公共信息提示框
 * G3.alert
 * @constructor
 * @param string  title      标题
 * @param string  content    提示内容
 * @param function  fn         回调函数
 * @param string  result     结果
 * 		@param string info  默认
 * 		@param string success 成功
 * 		@param string warn 警告
 * 		@param string error 错误
 * @param string  closedmodel     自动关闭时间
 * **/
G3.alert = function(title, content, fn, result,closedmodel){
    //判断是不是IE
    if( $.support.msie ){
        if(self.frameElement.tagName&&self.frameElement.tagName=="IFRAME"){
            if(fn && !result){
                top.index.alert(title, content, function(e){
                    if(e){
                        if(fn){
                            fn();
                        }
                    }
                },null,closedmodel);
            }
            if(fn && result){
                top.index.alert(title, content, function(e){
                    if(e){
                        if(fn){
                            fn();
                        }
                    }
                }, result,closedmodel);
            }
            if(!fn && result){
                top.index.alert(title, content, null, result,closedmodel);
            }
            if(!fn && !result){
                top.index.alert(title, content, null, null,closedmodel);
            }

            /*top.index.alert(title, content, function(e){
                if(e){
                    if(fn){
                        fn();
                    }
                }
            }, result);*/
        }else{
            if(fn && !result){
                window.index.alert(title, content, function(e){
                    if(e){
                        if(fn){
                            fn();
                        }
                    }
                },null,closedmodel);
            }
            if(fn && result){
                window.index.alert(title, content, function(e){
                    if(e){
                        if(fn){
                            fn();
                        }
                    }
                }, result,closedmodel);
            }
            if(!fn && result){
                window.index.alert(title, content, null, result,closedmodel);
            }
            if(!fn && !result){
                window.index.alert(title, content, null, null,closedmodel);
            }
            /*
            window.index.alert(title, content, function(e){
                if(e){
                    if(fn){
                        fn();
                    }
                }
            }, result);*/
        }
    } else{
        if(top!=self){
            try {
                if(fn && !result){
                    top.index.alert(title, content, function(e){
                        if(e){
                            if(fn){
                                fn();
                            }
                        }
                    },null,closedmodel);
                }
                if(fn && result){
                    top.index.alert(title, content, function(e){
                        if(e){
                            if(fn){
                                fn();
                            }
                        }
                    }, result,closedmodel);
                }
                if(!fn && result){
                    top.index.alert(title, content, null, result,closedmodel);
                }
                if(!fn && !result){
                    top.index.alert(title, content, null, null,closedmodel);
                }
                /*
                top.index.alert(title, content, function(e){
                    if(e){
                        if(fn){
                            fn();
                        }
                    }
                }, result);*/
            } catch(e) {
                if(fn && !result){
                    window.index.alert(title, content, function(e){
                        if(e){
                            if(fn){
                                fn();
                            }
                        }
                    },null,closedmodel);
                }
                if(fn && result){
                    window.index.alert(title, content, function(e){
                        if(e){
                            if(fn){
                                fn();
                            }
                        }
                    }, result,closedmodel);
                }
                if(!fn && result){
                    window.index.alert(title, content, null, result,closedmodel);
                }
                if(!fn && !result){
                    window.index.alert(title, content, null, null,closedmodel);
                }

                /*window.index.alert(title, content, function(e){
                    if(e){
                        if(fn){
                            fn();
                        }
                    }
                }, result);*/
            }
        }else{
            try {
                if(fn && !result){
                    window.index.alert(title, content, function(e){
                        if(e){
                            if(fn){
                                fn();
                            }
                        }
                    },closedmodel);
                }
                if(fn && result){
                    window.index.alert(title, content, function(e){
                        if(e){
                            if(fn){
                                fn();
                            }
                        }
                    }, result,closedmodel);
                }
                if(!fn && result){
                    window.index.alert(title, content, null, result,closedmodel);
                }
                if(!fn && !result){
                    window.index.alert(title, content, null, null,closedmodel);
                }
                /*
                window.index.alert(title, content, function(e){
                    if(e){
                        if(fn){
                            fn();
                        }
                    }
                }, result);*/
            }catch(e) {
                alert(content);
            }
        }
    }
    $("button,input").keydown(function(event) {
        if (event.keyCode == 13) {
            return false;
        }
    });
    //$("#obj_mask").show();
};
/**
 * G3 公共确认框
 * @class G3.confirm
 * @constructor
 * @param title      标题     string
 * @param content    提示内容  string
 * @param fn         确认回调函数  function
 * @param fn         取消回调函数    function
 * @example
 *  * <pre><code>
 *  G3.confirm("提示","提示信息",function(){
 *     确认回调函数；
 *     }，
 *     function(){
 *     取消回调函数；
 *     }
 *  );
 * </code></pre>
 * **/
G3.confirm=function(title,content,fn1,fn2,buttonname) {
    //判断是不是IE
    if( $.support.msie ){
        if(self.frameElement.tagName&&self.frameElement.tagName=="IFRAME"){
            top.index.confirm(title, content,function(e){
                if(e){
                    if(fn1){
                        fn1();
                    }
                }
            },function(e){
                if(e){
                    if(fn2){
                        fn2();
                    }
                }
            },buttonname);
        }else{
            window.index.confirm(title, content,function(e){
                if(e){
                    if(fn1){
                        fn1();
                    }
                }
            },function(e){
                if(e){
                    if(fn2){
                        fn2();
                    }
                }
            },buttonname);
        }
    } else{
        if(top!=self){
            try {
                top.index.confirm(title, content,function(e){
                    if(e){
                        if(fn1){
                            fn1();
                        }
                    }
                },function(e){
                    if(e){
                        if(fn2){
                            fn2();
                        }
                    }
                },buttonname);
            } catch(e) {
                window.index.confirm(title, content,function(e){
                    if(e){
                        if(fn1){
                            fn1();
                        }
                    }
                },function(e){
                    if(e){
                        if(fn2){
                            fn2();
                        }
                    }
                },buttonname);
            }
        }else{
            window.index.confirm(title, content,function(e){
                if(e){
                    if(fn1){
                        fn1();
                    }
                }
            },function(e){
                if(e){
                    if(fn2){
                        fn2();
                    }
                }
            },buttonname);
        }
    }
    $("button").blur();
    //$("#obj_mask").show();
};
/**
 * G3 模态弹窗封装：显示
 * @class G3.showModalDialog
 * @constructor
 * @param title      标题     string
 * @param url    	 显示的界面地址  string
 * @param opintion   弹窗参数  object
 * @param callbak    回调函数    function
 * @example
 * <pre><code>
 * G3.showModalDialog("弹框标题",地址url,{width:弹框宽度,height:弹框高度},function(e,ret){
		回调函数;
	});
 * </code></pre>
 */
G3.showModalDialog = function(title, url, opintion, callbak){
    //判断是不是IE
    setTimeout(function () {
        if( $.support.msie ){
            if(self.frameElement.tagName&&self.frameElement.tagName=="IFRAME"){
                try {
                    top.index.showModalDialogDiv(title, url, opintion, callbak);
                } catch(e) {
                    window.index.showModalDialogDiv(title, url, opintion, callbak);
                }
            }else{
                try {
                    top.index.showModalDialogDiv(title, url, opintion, callbak);
                } catch(e) {
                    window.index.showModalDialogDiv(title, url, opintion, callbak);
                }
            }
        } else{
            if(top!=self){
                try {
                    try {
                        top.index.showModalDialogDiv(title, url, opintion, callbak);
                    } catch(e) {
                        window.index.showModalDialogDiv(title, url, opintion, callbak);
                    }
                } catch(e) {
                    window.index.showModalDialogDiv(title, url, opintion, callbak);
                }
            }else{
                window.index.showModalDialogDiv(title, url, opintion, callbak);
            }
        }
    }, 100);
    $("button").blur();
    //$("#obj_mask").show();
};
/**
 * G3 自定义弹出层方法
 * @class G3.customModalDialog
 * @constructor
 * @param title      弹层标题     string
 * @param content    弹层内容     object
 * @param opintion   弹层参数     object
 * @param showskin   弹层样式类名   string
 * @example
 * <pre><code>
 * 	G3.closeModalDialog(返回值);
 * </code></pre>
 * **/
G3.customModalDialog = function(title, content, opintion,showskin){
    layer.open({
        type: 1,
        title: title,
        closeBtn: 1,
        shadeClose: true,
        skin: showskin,
        content:content
    });
    $("button").blur();
};
/**
 * G3 模态弹窗封装：关闭
 * @class G3.closeModalDialog
 * @constructor
 * @param string ret 返回值
 * @example
 * <pre><code>
 * 	G3.closeModalDialog(返回值);
 * </code></pre>
 * **/
G3.closeModalDialog = function(ret){
    //判断是不是IE
    if( $.support.msie ){
        if(self.frameElement.tagName&&self.frameElement.tagName=="IFRAME"){
            try {
                try {
                    top.index.closeModalDialogDiv(ret);
                } catch(e) {
                    parent.window.index.closeModalDialogDiv(ret);
                }

            } catch(e) {
                window.index.closeModalDialogDiv(ret);
            }
        }else{
            try {
                try {
                    top.index.closeModalDialogDiv(ret);
                } catch(e) {
                    parent.window.index.closeModalDialogDiv(ret);
                }

            } catch(e) {
                window.index.closeModalDialogDiv(ret);
            }
        }
    } else{
        if(top!=self){
            try {
                try {
                    top.index.closeModalDialogDiv(ret);
                } catch(e) {
                    parent.window.index.closeModalDialogDiv(ret);
                }
            } catch(e) {
                window.index.closeModalDialogDiv(ret);
            }
        }else{
            parent.window.index.closeModalDialogDiv(ret);
        }
    }
};
/***
 * 获取弹窗页面传递的参数
 * @class G3.getModalDialogParam
 * @constructor
 * @param obj key 参数值
 * ***/
G3.getModalDialogParam = function(key){
    //判断是不是IE
    try {
        return parent.window.index.getModalDialogParam(key);
    } catch(e) {
        try {
            return top.index.getModalDialogParam(key);
        } catch(e) {
            return parent.getModalDialogParam(key);
        }
    }
};
